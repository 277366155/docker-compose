### 此配置，需求实现说明

    1，web后台站点，通过判断ip，是否存在于redis的ip列表名单内，存在则被指向stage环境
    2，api站点，通过判断请求头中的tenantid，是否存在于redis列表中，存在则被引流至stage环境

### 处理方案说明
    1，使用openresty，在nginx初始化时，将redis配置的ipList和idList保存到内存字典中。
    2，接收到请求时，判断当前请求ip或请求头tenantid是否存在于对应缓存字典中，若不存在则使用默认upstream节点，若存在则返回指定的upstream节点。
    3，考虑到redis配置有更新的情况，需要更新内存中缓存的字典数据。可以创建一个脚本周期性的判断，缓存数据是否有更新，有更新则更新nginx缓存。
        3.1，也可以定义一个路由地址，触发执行lua脚本，同时需要限定ip白名单，提高安全性